/*!
 * Jeferson Luckas - Snake game 2D
 * 
 * Copyright (c) 2020 Jeferson Luckas
 * Released under the MIT license
 * https://github.com/JefersonLucas/snake-game-2D/blob/master/LICENSE
 *
 */
 
let cobra=[],rabo=2;const velocidade=1;let velocidade_X=1,velocidade_Y=0,palco=30,tamanho=20,posicao_X=posicao_Y=Math.floor(Math.random()*palco),comida_X=comida_Y=15;window.onload=function(){let o=document.getElementById("canvas"),a=o.getContext("2d");document.addEventListener("keydown",function(o){switch(o.keyCode){case 37:velocidade_X=-1,velocidade_Y=0;break;case 38:velocidade_X=0,velocidade_Y=-1;break;case 39:velocidade_X=1,velocidade_Y=0;break;case 40:velocidade_X=0,velocidade_Y=1}}),setInterval(function(){let c=0;posicao_X+=velocidade_X,posicao_Y+=velocidade_Y,posicao_X<0&&(posicao_X=palco-1);posicao_X>palco-1&&(posicao_X=0);posicao_Y<0&&(posicao_Y=palco-1);posicao_Y>palco-1&&(posicao_Y=0);a.fillStyle="#4b5d15",a.fillRect(0,0,o.width,o.height),a.fillStyle="#000",a.fillRect(comida_X*tamanho,comida_Y*tamanho,tamanho-1,tamanho-1),a.fillStyle="#000";for(let o=0;o<cobra.length;o++)a.fillRect(cobra[o].x*tamanho,cobra[o].y*tamanho,tamanho-1,tamanho-1),c++,cobra[o].x===posicao_X&&cobra[o].y===posicao_Y&&(rabo=2,confirm("O jogo acabou para você!\nSua pontuação foi de "+c+" pontos"));cobra.push({x:posicao_X,y:posicao_Y});for(;cobra.length>rabo;)cobra.shift();comida_X==posicao_X&&comida_Y==posicao_Y&&(rabo++,comida_X=Math.floor(Math.random()*palco),comida_Y=Math.floor(Math.random()*palco))},120)};